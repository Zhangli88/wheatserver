<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Wheatserver by yuyuyu101</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/yuyuyu101/wheatserver">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/yuyuyu101/wheatserver/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/yuyuyu101/wheatserver/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Wheatserver</h1>
          <p>A C Implemented WSGI Server.</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/yuyuyu101">yuyuyu101</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

        <h1>Wheatserver(Alpha)</h1>

<p>Full stack sync/asyc(wait) IO Application Framework, help you build your own
application server.</p>

<p>You can use Wheatserver to develop web server, application proxy server and
db proxy server etc. You will enjoy using sync programming model to have
great performance under async model.</p>

<p>Now supporting WSGI, Static file distribute and Redis distribute.</p>

<p><a href="http://www.wzxue.com/wheatserver-2/">中文文档</a></p>

<h1>Feature</h1>

<ul>
<li><p>Fast: Full C implemented, and discards any module unnecessary and try to
avoid to copy data.</p></li>
<li><p>Low memory: Keep low memory and take actions to let multi worker processes
share read-only memory.</p></li>
<li><p>Pluggable: Worker type, protocol implement and application server all can be
remove and add. You can construct your own worker, application server and
other.</p></li>
<li><p>Statistic: You can use 'kill -s sigusr1 PID' command or tool to get statistic 
information from wheatserver.</p></li>
<li><p>Reload: If you change config file and apply it without restart wheatserver.
Only you need to do is 'kill -s sighup PID' let wheatserver reload file and
reset workers.</p></li>
<li><p>Manage: Administrator can get information of running wheatserver by command
interface which can be accessed via client/client.py. You can get more info by
enter 'help' with running it.</p></li>
<li><p>Module extend: Module can define own statistic information, command(accessed
by Wheatserver client) and configuration in simple way. All module defines can
utilize Wheatserver's admin tools.</p></li>
<li><p>Simple: Try to hide complexity logical processing and provide simple
interfaces to developer.</p></li>
<li><p>Implemented:</p></li>
</ul><blockquote>
<p>Workers: Sync Worker and Async Worker</p>

<p>Protocol: Http 1.0 and Http 1.1, Redis protocol</p>

<p>Application Server: WSGI support and static file support both under Http,
Redis-cluster app support under Redis protocol</p>
</blockquote>

<h1>Build</h1>

<p>Requestments: python, python-dev </p>

<p>Support Platform: Linux,  Macosx</p>

<p>Support Web Service: WSGI</p>

<p>shell &gt; cd wheatserver</p>

<p>shell &gt; cd src</p>

<p>shell &gt; make</p>

<h1>Run</h1>

<p>-./wheatserver --app-project-path {your app path } --app-project-name {app filename} --app-name {callable object}</p>

<h1>Config</h1>

<p><em>Attention</em>: you must specify needed options under your choosing <code>protocol</code></p>

<p>See <a href="https://github.com/yuyuyu101/wheatserver/blob/master/wheatserver.conf">wheatserver.conf</a></p>

<h1>WSGI Example(Sample)</h1>

<pre>
#sample.py which is in the wheatserver/src
HELLO_WORLD = b"Hello world!\n"

def simple_app(environ, start_response):
    """Simplest possible application object"""
    status = '200 OK'
    response_headers = [('Content-type', 'text/plain')]
    start_response(status, response_headers)
    return [HELLO_WORLD]
</pre>

<p>-./wheatserver --app-project-name sample --app-name simple_app</p>

<h1>WSGI Example(Django)</h1>

<p>-My Django Project Directory:</p>

<pre>
|-signup
   |-wsgi.py
   |-bin
   |-include
   |-lib
   |-signup
   |---activity
   |-----fixtures
   |-----static
   |-------css
   |-------img
   |-------js
   |---assets
   |-----static
   |---benefits
   |-----templatetags
   |---finance
   |-----templatetags
   |---fixtures
   |---logs
   |---match
   |-----......
   |---media
   |-----......
   |---snapboard
   |-----.......
   |---specialist
   |-----static
   |-------css
   |-------js
   |-----templates
   |-------admin
   |---------specialist
   |---static
   |---templates
   |-----......
   |---third_user
   |-----static
   |---settings.py
   |---urls.py
</pre>

<p>wsgi.py at the top of tree is the entry of Django WSGI.</p>

<pre>
import os, sys

sys.path.append(os.path.join(os.path.dirname(os.path.abspath(__file__)), 'signup'))
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "signup.settings")

# This application object is used by the development server
# as well as any WSGI server configured to use this file.
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application()
</pre>

<p>-shell&gt; ./wheatserver --app-project-path /Users/abcd/signup/ --app-module-name wsgi --app-name application</p>

<h1>Admin management</h1>

<p>shell &gt; client/client.py</p>

<p>enter <code>help</code> to get command list and description</p>

<h1>Signals for controlling</h1>

<pre>
# using reload to send the signal
kill -HUP `cat /tmp/wheatserver.pid`
# using kill to send the signal
kill -INT `cat /tmp/project-master.pid`
</pre>

<table>
<tr>
<td>Signal</td>
      <td>Description</td>
   </tr>
<tr>
<td>SIGHUP</td>
      <td>reload configuration file, gracefully reload all the workers and the master process</td>
   </tr>
<tr>
<td>SIGTERM</td>
      <td>brutally kill all the workers and the master process</td>
   </tr>
<tr>
<td>SIGINT</td>
      <td>brutally kill the workers and the master process</td>
   </tr>
<tr>
<td>SIGQUIT</td>
      <td>gracefully kill the workers and the master process</td>
   </tr>
<tr>
<td>SIGUSR1</td>
      <td>print statistics</td>
   </tr>
<tr>
<td>SIGUSR2</td>
      <td>reexec the entire master process and spawn workers</td>
   </tr>
<tr>
<td>SIGTTIN</td>
      <td>add one to workernumber</td>
   </tr>
<tr>
<td>SIGTTOU</td>
      <td>subtraction of one from workernumber</td>
   </tr>
<tr>
<td>SIGWINCH</td>
      <td>only gracefully kill the workers and the master process backend</td>
   </tr>
</table>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>